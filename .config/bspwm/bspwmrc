#!/bin/sh
killall -q polybar
killall -q sxhkd
killall -q picom
killall -q udiskie
killall -q nm-applet

get_external_monitor=$(xrandr --query | grep -w 'DP-1')
if [[ $get_external_monitor = *disconnected* ]]; then
    bspc monitor -d 1 2 3 4 5 6 7 8 9 10
else
    xrandr --output DP-1 --auto --right-of eDP-1
    bspc monitor eDP-1 -d 1 2 3 4 5
    bspc monitor DP-1 -d 6 7 8 9 10
    # Polybar external desktop
    polybar bar2 >> /tmp/polybar2.log 2>&1 &
fi

# Polybar main desktop
polybar bar1 >> /tmp/polybar1.log 2>&1 &

bspc config border_width         2
bspc config window_gap          12

bspc config split_ratio          0.50
bspc config borderless_monocle   true
bspc config gapless_monocle      true

# TODO: test it
# exec urxvr &

# Set wallpaper
exec feh --no-fehbg --bg-scale '/home/marco/Documents/wallpaper.jpeg' &
# Keybinds
sxhkd &
# Compositor
picom -b &
# USB mounter
udiskie &
# Network manager
nm-applet &
